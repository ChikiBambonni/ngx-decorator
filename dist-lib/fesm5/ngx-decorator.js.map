{"version":3,"file":"ngx-decorator.js","sources":["ng://ngx-decorator/decorators/take-until-destroy.decorator.ts","ng://ngx-decorator/enums/changes-strategy.enum.ts","ng://ngx-decorator/decorators/track-changes.decorator.ts","ng://ngx-decorator/enums/log-level.enum.ts","ng://ngx-decorator/decorators/safe.decorator.ts","ng://ngx-decorator/utils/core.utils.ts","ng://ngx-decorator/decorators/cache.decorator.ts","ng://ngx-decorator/decorators/outside-angular.decorator.ts","ng://ngx-decorator/ngx-decorator.ts"],"sourcesContent":["import { Subject } from 'rxjs';\n\n/**\n   * @param constructor Class constructor\n*/\nexport function TakeUntilDestroy(constructor: Function) {\n    const originalDestroy = constructor.prototype.ngOnDestroy;\n\n    if ( typeof originalDestroy !== 'function') {\n        console.warn(`Class ${constructor.name} should implement OnDestroy method`);\n    }\n\n    constructor.prototype.componentDestroy = function() {\n        this._takeUntilDestroy$ = this._takeUntilDestroy$ || new Subject();\n        return this._takeUntilDestroy$.asObservable();\n    };\n\n    constructor.prototype.ngOnDestroy = function(...args) {\n        if (typeof originalDestroy === 'function') {\n            originalDestroy.apply(this, args);\n        }\n\n        if (this._takeUntilDestroy$) {\n            this._takeUntilDestroy$.next();\n            this._takeUntilDestroy$.complete();\n        }\n    };\n}\n","export enum ChangesStrategy {\n    First = 'First',\n    Each = 'Each',\n    NotFirst = 'NotFirst'\n}\n","import { SimpleChanges } from '@angular/core';\n\nimport { ChangesStrategy } from '../enums/changes-strategy.enum';\n\n/**\n   * @param key @Input() fieled name\n   * @param methodName method name to be called\n   * @param strategy changes strategy to be applied\n   * @returns {Function}\n*/\nexport function TrackChanges<T>(key: string, methodName: string, strategy: ChangesStrategy = ChangesStrategy.Each) {\n  return function(targetClass, functionName: string, descriptor) {\n    const source = descriptor.value;\n\n    descriptor.value = function (changes: SimpleChanges) {\n\n      if (changes && changes[key]\n        && changes[key].currentValue) {\n        const isFirstChange = changes[key].firstChange;\n\n        if (strategy === ChangesStrategy.Each ||\n           (strategy === ChangesStrategy.First && isFirstChange) ||\n           (strategy === ChangesStrategy.NotFirst && !isFirstChange)) {\n          targetClass[methodName].call(this, changes[key].currentValue as T);\n        }\n      }\n\n      return source.call(this, changes);\n    };\n\n    return descriptor;\n  };\n}","export enum SafeLogLevel {\n    Default = 'Default',\n    Console = 'Console',\n    ErrorHandler = 'ErrorHandler'\n}\n","import { SafeParams } from '../interfaces/safe-params.interface';\nimport { SafeLogLevel } from '../enums/log-level.enum';\n\n/**\n    * @param params SafeParams interface\n    * @returns {Function}\n*/\nexport function Safe<T>(params: SafeParams<T> = {}): Function {\n  return function(target: object, propertyKey: string, descriptor: TypedPropertyDescriptor<any>): TypedPropertyDescriptor<any> {\n    const originalMethod = descriptor.value;\n    const logLevel = params.logLevel || SafeLogLevel.Default;\n\n    descriptor.value = function SafeWrapper() {\n      try {\n        return originalMethod.apply(this, arguments);\n      } catch (error) {\n        if (logLevel === SafeLogLevel.Console) { console.error(error); }\n\n        if (logLevel === SafeLogLevel.ErrorHandler) {\n          if (!this.errorHandler) {\n            throw new Error(`\n                Class with 'Safe' decorator and logLevel 'ErrorHandler'\n                should have 'errorHandler' class property with 'ErrorHandler' class.`);\n          } else {\n            this.errorHandler.handleError(error);\n          }\n        }\n\n        return params.returnValue || false;\n      }\n    };\n\n    return descriptor;\n  };\n}\n","export const serializeObject = (obj?: object): string => {\n    let str = '';\n\n    if (obj) {\n        Object.keys(obj).forEach((key: string) => {\n            if (str !== '') {\n                str += '&';\n            }\n\n            str += `${key}=${encodeURIComponent(obj[key])}`;\n        });\n    }\n\n    return str;\n};\n","import { serializeObject } from '../utils/core.utils';\nimport { CacheParams } from '../interfaces/cache-params.interface';\n\n/**\n * @param params cache params\n * @returns {Function}\n */\n// tslint:disable-next-line: ban-types\nexport function Cache(params: CacheParams = {}): Function {\n    const cache = {\n        data: new Map<string, any>(),\n        get<T>(key: string): T {\n            return this.data.get(key) as T;\n        },\n        set<T>(key: string, value: T): void {\n            this.data.set(key, value);\n        }\n    };\n\n    // tslint:disable-next-line: only-arrow-functions\n    return function(target, key, descriptor) {\n        if (descriptor === undefined) {\n            descriptor = Object.getOwnPropertyDescriptor(target, key);\n        }\n\n        const originalMethod = descriptor.value;\n\n        descriptor.value = function() {\n            let savedKey = params.cacheKey || key;\n\n            if (params.useParamsAsKeys) {\n                savedKey = `${savedKey}-${serializeObject(arguments)}`;\n            }\n\n            const cacheResult = cache.get(savedKey);\n            if (cacheResult) {\n                console.log('Returning from cache: ', cacheResult);\n                return cacheResult;\n            }\n\n            const result = originalMethod.apply(this, arguments);\n            cache.set(savedKey, result);\n\n            return result;\n        };\n\n        return descriptor;\n    };\n}\n","\nexport function OutsideAngular(targetClass: any, functionName: string, descriptor) {\n    const source = descriptor.value;\n\n    descriptor.value = function(...data) {\n      if (!this.ngZone) {\n        throw new Error(`Class with 'OutsideAngular' decorator should have 'ngZone' class property with 'NgZone' class.`);\n      }\n      return this.ngZone.runOutsideAngular(() => source.call(this, ...data));\n    };\n\n    return descriptor;\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {ChangesStrategy as Éµa} from './enums/changes-strategy.enum';"],"names":[],"mappings":"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"}